var i=class extends HTMLElement{constructor(){super();this.previous=void 0,this.queue=Array(3).fill(null),this.doUpdate=!0,this.skipNextUpdate=!1,this.timeoutID=void 0}connectedCallback(){document.addEventListener("visibilitychange",()=>{this.doUpdate=!document.hidden,this.doUpdate||(this.skipNextUpdate=!0)}),this.addEventListener("mouseenter",()=>{this.doUpdate=!1,this.skipNextUpdate=!0,this.classList.add("expand"),this.expand(),this.timeoutID!==void 0&&clearTimeout(this.timeoutID)}),this.addEventListener("mouseleave",()=>{this.timeoutID=setTimeout(()=>{this.collapse(),this.doUpdate=!0,this.classList.remove("expand"),this.timeoutID=void 0},80)}),window.addEventListener("notify:sonner",e=>{e?.detail&&this.push(e.detail)}),window.requestAnimationFrame(this.first.bind(this))}collapse(){for(let e=0;e<3;e++)this.queue[e]!==null&&this.queue[e].el.collapse();this.style.height="0px"}expand(){let e=0;for(let t=0;t<3;t++)this.queue[t]!==null&&(this.queue[t].el.expand(e),e+=this.queue[t].el.height+8);this.style.height=`${e}px`}loop(e){let t=(e-this.previous)*.001;if(this.previous=e,this.doUpdate)if(this.skipNextUpdate)this.skipNextUpdate=!1;else{for(let s=0;s<3;s++)this.queue[s]!==null&&(this.queue[s].el.isConnected?this.queue[s]?.el?.update(t):this.queue[s]=null);this.reconcile()}window.requestAnimationFrame(this.loop.bind(this))}reconcile(){for(let e=2;e>=0;e--)if(this.queue[e]!==null){if(e===0)break;this.queue[e-1]===null&&(this.queue[e-1]=this.queue[e],this.queue[e]=null)}for(let e=0;e<3;e++)this.queue[e]!==null&&this.queue[e].el.updateIndex(e)}first(e){this.previous=e,window.requestAnimationFrame(this.loop.bind(this))}push(e){let t=Object.assign({heading:"",message:"",el:null,duration:5,classes:[],button:{callback:()=>{},label:"",classes:"",event:null,eventData:null}},e);(t.duration===1/0||typeof t.duration!="number")&&(console.warn("Sonner duration must be a number. Defaulting to 5 seconds."),t.duration=5),Array.isArray(t.classes)||(t.classes=[t.classes]),typeof t.button?.callback!="function"&&(t.button.callback=()=>{}),t.button?.classes||(t.button.classes=[]),Array.isArray(t.button.classes)||(t.button.classes=[t.button.classes]),t.el=new n(t),this.insert(t)}insert(e){this.queue[2]!==null&&this.queue[2]?.el?.delete(),this.queue[1]!==null&&(this.queue[2]=this.queue[1]),this.queue[0]!==null&&(this.queue[1]=this.queue[0]),this.queue[0]=e,this.appendChild(this.queue[0].el)}};customElements.get("sonner-component")||customElements.define("sonner-component",i);var a=new i;document.body.appendChild(a);var l=a,n=class extends HTMLElement{constructor(e){super();this.settings=e,this.life=e.duration,this.height=66,this.y=0,this.offset=0,this.index=0,this.dead=!1,this.scale=1,this.isExpanded=!1,this.expandedOffset=0,this.style.setProperty("--y","0"),this.style.setProperty("--opacity","1"),this.style.setProperty("--offset","0px"),this.style.setProperty("--scale","1")}connectedCallback(){this.innerHTML=`
            <copy-wrapper>
                ${this.renderHeading()}
                ${this.renderMessage()}
            </copy-wrapper>
            ${this.renderButton()}
        `;let e=this.querySelector("button");e&&e.addEventListener("click",()=>{this.settings.button.callback(),this.settings.button?.event!==null&&window.dispatchEvent(new CustomEvent(this.settings.button.event,{detail:this.settings.button?.eventData??null})),this.delete()});let t=this.getBoundingClientRect();this.height=t.height;let s=this.animate([{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0px)"}],{duration:300,fill:"forwards",easing:"cubic-bezier(0.0, 0.0, 0.2, 1)"});s.finished.then(()=>{this.style.setProperty("--y",`${this.y}px`),this.style.setProperty("--opacity","1"),s.cancel()})}renderHeading(){return this.settings.heading?.length?`<h3>${this.settings.heading}</h3>`:""}renderMessage(){return this.settings.message?.length?`<p>${this.settings.message}</p>`:""}renderButton(){return this.settings.button?.label?`<button class="${this.settings.button.classes.join(" ")}">${this.settings.button.label}</button>`:""}expand(e){this.isExpanded=!0,this.expandedOffset=e,this.style.setProperty("--offset","0px"),this.style.setProperty("--scale","1"),this.style.setProperty("--y",`-${e}px`)}collapse(){this.style.setProperty("--offset",`-${this.offset}px`),this.style.setProperty("--scale",`${this.scale}`),this.style.setProperty("--y",`${this.y}px`)}updateIndex(e){switch(this.index=e,e){case 0:this.style.zIndex="3";break;case 1:this.style.zIndex="2";break;case 2:this.style.zIndex="1";break}this.offset=16*this.index,this.scale=1-.05*e,this.style.setProperty("--offset",`-${this.offset}px`),this.style.setProperty("--scale",`${this.scale}`)}update(e){this.life-=e,this.life<=0&&this.isConnected&&!this.dead&&(this.dead=!0,this.delete())}delete(){this.dead=!0;let e;this.isExpanded?(this.style.transformOrigin="center",e=this.animate([{opacity:1},{opacity:0}],{duration:150,fill:"forwards",easing:"cubic-bezier(0.4, 0.0, 1, 1)"})):(this.style.setProperty("--offset",`-${this.offset}px`),e=this.animate([{opacity:1,transform:`scale(${this.scale}) translateY(${this.y}px) translateY(-${this.offset}px)`},{opacity:0,transform:`scale(${this.scale-.05}) translateY(${this.y}px) translateY(-${this.offset}px)`}],{duration:200,fill:"forwards",easing:"cubic-bezier(0.4, 0.0, 1, 1)"})),e.finished.then(()=>{this.remove()})}};customElements.get("sonner-toast-component")||customElements.define("sonner-toast-component",n);export{l as default};
